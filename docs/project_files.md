# Skylite Project Files

A Skylite project consists of multiple files in addition to Rust code. These project files contain Scheme code that is evaluated to produce some data, which is then used in Rust to generate code. Scheme's syntax enables both writing the data directly in the file for smaller assets or prototypes, or writing a script that loads the data from some other source. The Scheme files are used in Rust through multiple macros that run the Scheme code and generate code based on the result.

Throughout the documentation, the Scheme files are written in a way that shows the format that is expected in each case, which usually means a quoted list at the top level (`'(...)`). However, any Scheme code that eventually produces the required format is allowed. Note that during compilation, the same Scheme file may be evaluated multiple times.

There are several different types of files that are used throughout a Skylite project, with each serving a different function and having a different format.

## Main Project File

At the root of a project is the main project file, which contains general information about the project. It has the following format:

```scheme
'((name . MyProject)
  (assets .
    ((nodes . (...))
     (node-lists . (...))
     (sequences . (...)))))
```

The top level of the main project file is an associative list ("alist"), with the following keys:

- `name`: The name of the project. This name will be reflected in Rust by the code generated by the `#[skylite_project]` macro.
- `assets`: How the asset files for each asset type are found. The value for this key is another alist, which maps each asset type to a list of globs that specify the location of the asset files relative to the main project file. Only the asset types for which the asset file location is different from the following default values need to be included:

  | Asset type   | Default                 |
  | ------------ | ----------------------- |
  | `nodes`      | `(./nodes/*.scm)`       |
  | `node-lists` | `(./nodes-lists/*.scm)` |
  | `sequences`  | `(./sequences/*.scm)`   |

## Asset Files

Assets are anything that the project might need at compile- or runtime. Most assets have some effect on code generation and are also stored in a compressed format in the final binary.

When an asset is referred to by another asset or by a Rust macro, its _asset name_ should be used. The asset name is the final part of the assets file path _without_ the file extension. For example, the name of the node asset at path `./nodes/my-node.scm` would be `my-node`. Asset names must be unique per asset type, which means that multiple assets with the same filename are not allowed, even if they are in different folders.

### Nodes

**_See the documentation for nodes: [Nodes](nodes.md)_**

Nodes are the main building block for Skylite projects. A node contains a set of properties and associated logic, as well as child nodes. The resulting tree of nodes represents the current state of the project, and is updated and rendered in a well-defined way.

### Node Lists

**_See the documentation for node Lists: [Node lists](node_lists.md)_**

Node Lists are pre-defined collections of nodes. Since node lists are compressed in the final binary, using node lists can potentially save memory over writing the nodes out in code.

### Sequences

**_See the documentation for Sequences: [Sequences](sequences.md)_**

Sequences are small programs that can animate certain properties of nodes. They can be used for anything that requires modifying node properties over time, such as animations, cutscenes or music tracks. Sequences consist of small batches of instructions in an assembly-like language.
